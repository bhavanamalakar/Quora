{% extends 'base.html' %}
{% block title %}{{ question.title }}{% endblock %}
{% block content %}
<h2>{{ question.title }}</h2>
<div style="white-space: pre-wrap;">{{ question.body }}</div>
<small class="text-muted">Asked by {{ question.user.username }} on {{ question.created_at }}</small>

<hr>
<h4 class="mt-4">Answers</h4>
{% for ans in answers %}
    <div class="card mb-2">
        <div class="card-body">
            <div style="white-space: pre-wrap;">{{ ans.body }}</div>

            
            <small class="text-muted">By {{ ans.user.username }} â€¢ {{ ans.created_at }}</small><br>

            {% if question.user != request.user %}
                <form method="post" action="{% url 'like_answer' ans.id %}">
                    {% csrf_token %}
                    <button class="btn btn-sm btn-outline-primary mt-2">
                        {% if user in ans.likes.all %}Unlike{% else %}Like{% endif %} ({{ ans.total_likes }})
                    </button>
                </form>
            {% endif %}
        </div>
    </div>
{% empty %}
    <p>No answers yet.</p>
{% endfor %}
<hr>
{% if question.user != request.user %}
<h4 class="mt-4">Your Answer</h4>
<form method="post" class="card p-3 shadow">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-success">Post Answer</button>
</form>
{% endif %}
{% endblock %}

